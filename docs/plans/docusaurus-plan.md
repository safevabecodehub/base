# План MVP и архитектуры базы знаний SafeVibe на Docusaurus

Цель: создать масштабируемую базу знаний для вайб-кодеров (1000+ заметок, 10–15 мини-аппов, 5+ контрибьюторов) на Docusaurus с Obsidian-like интерфейсом, UI на базе shadcn и чёткой системой категорий, тегов и правил.

---

## 0. Визия, роли и требования

1. **Визия**
   - Единая база знаний сообщества: полезные ссылки, обзоры, статьи, инструменты, мини-аппы.
   - Docusaurus как движок документации + React как платформа для интерактива.

2. **Роли**
   - Core maintainers: архитектура, ревью, мини-аппы, правила.
   - Content writers: заметки, гайды, обзоры.
   - Tool/AI operators (agents): работа с Claude/LLM, автоматизация.

3. **Ключевые требования MVP**
   - Масштабируемость до 1000+ заметок за счёт грамотной структуры папок и тегов.
   - Система категорий и тегов, задаваемая через front matter.
   - Продуманная архитектура репозитория (docs + src + .rules + meta-доки).
   - UI на базе shadcn, интерфейс, по ощущению близкий к Obsidian.
   - Минимум 1–2 мини-аппы как референс для дальнейшей разработки.

---

## 1. Информационная архитектура: типы заметок, категории, теги

1. **Типы заметок (logical types)** — задаются через `type` в front matter:
   - `guide` — пошаговые гайды / how-to.
   - `reference` — справочник, терминология, API, спецификации.
   - `review` — обзоры инструментов, сервисов, статей.
   - `pattern` — best practices, паттерны вайб-кодинга.
   - `playbook` — последовательности действий под сценарий ("как запустить X", "как организовать Y").

2. **Домены (категории верхнего уровня)** — соответствуют подпапкам в `docs/`:
   - `concepts/` — философия, базовые идеи, ключевые понятия.
   - `tools/` — инструменты (IDE, плагины, сервисы, AI-инструменты).
   - `workflows/` — пайплайны, рабочие процессы, чек-листы.
   - `apps/` — мини-аппы, их документация и гайды.
   - `community/` — сообщество, правила, форматы, мероприятия.
   - `meta/` — архитектура проекта, правила, агенты, таксономия.

3. **Теги (front matter `tags`)**
   - Тематика: `ai`, `automation`, `frontend`, `backend`, `obsidian`, `docusaurus`, `shadcn`, `tools`, `productivity`.
   - Уровень: `beginner`, `intermediate`, `advanced`.
   - Тип: `guide`, `review`, `pattern`, `playbook` (дублирует `type` для фильтрации и поиска).
   - Статус: `draft`, `stable`, `needs-review`.

4. **Обязательные поля front matter для каждой заметки**
   - `title`
   - `description`
   - `tags` (минимум 1 тематический + 1 типовой тег)
   - `type` (`guide` / `review` / `pattern` / `playbook` / `reference`)
   - `status` (`draft` / `stable` / `needs-review`)
   - `author` (ник/команда)
   - `createdAt`, `updatedAt` (по возможности)

---

## 2. Структура репозитория и папок

### 2.1. Корень репозитория

Рекомендуемая структура:

- `docusaurus.config.(js|ts)` — основная конфигурация.
- `sidebars.(js|ts)` — конфиг сайдбаров.
- `package.json`
- `src/` — React-код, компоненты, мини-аппы, layout.
- `docs/` — контент базы знаний.
- `static/` — статические ресурсы (картинки, файлы).
- `.rules/` — правила для контента, кода, мини-апп и работы агентов.
- `.github/` — GitHub Actions + шаблоны issue/PR.
- `README.md` — краткое описание репозитория.

### 2.2. Структура `docs/` для масштабируемой базы

- `docs/intro.md` — входная точка в базу знаний (как пользоваться, как искать, как контрибьютить).
- `docs/concepts/*` — концепции и философия.
- `docs/tools/*` — инструменты, в т.ч. AI-агенты, IDE, плагины.
- `docs/workflows/*` — рабочие процессы и чек-листы.
- `docs/apps/*` — документация мини-апп.
- `docs/community/*` — сообщество, правила, форматы.
- `docs/meta/*` — архитектура и правила проекта:
  - `docs/meta/architecture.md` — high-level архитектура контента и кода.
  - `docs/meta/taxonomy.md` — правила категорий, тегов и типов заметок.
  - `docs/meta/content-style.md` — стиль написания, структура статей.
  - `docs/meta/contributing.md` — понятное объяснение контрибьюции.
  - `docs/meta/agents.md` — список агентов и их роли.
  - `docs/meta/claude.md` — отдельные правила взаимодействия с Claude.

### 2.3. Папка `.rules/` и строгие правила

Папка `.rules/` содержит жёсткие правила, которые должны учитывать и люди, и AI-агенты:

- `.rules/architecture.md` — детализированная архитектура (структура папок, конвенции по именам файлов, ключевые зависимости).
- `.rules/content.md` — строгие правила по контенту: front matter, теги, именование файлов, статусы.
- `.rules/apps.md` — требования к мини-аппам: структура, UI, тестирование, performance.
- `.rules/ai.md` — как использовать AI-инструменты (Claude и др.), ограничения и чувствительные зоны.

Эти файлы используются как источник истины для ревью и для настройки агентов.

### 2.4. Метадоки для агентов и AI

- `docs/meta/agents.md`
  - Перечень агентов (Claude, локальные LLM, Copilot и т.п.).
  - Область ответственности каждого агента.
  - Общие принципы: какие файлы читать, какие правила соблюдать.

- `docs/meta/claude.md`
  - Приоритетные директории: `docs/meta`, `.rules`, `docs/*`.
  - Список правил, которые Claude должен соблюдать (ссылки на `.rules/*`).
  - Шаблоны промптов / формулировок задач для работы с этим репо.

---

## 3. Инициализация Docusaurus и базовая конфигурация

1. **Инициализация проекта**
   - Установить Node.js LTS.
   - В корне репозитория:
     - `npx create-docusaurus@latest . classic` (если репо пустой) или аналогичный вариант.
   - Убедиться в наличии:
     - `docusaurus.config.(js|ts)`
     - `sidebars.(js|ts)`
     - папок `docs`, `blog`, `src`, `static`.

2. **Базовая конфигурация `docusaurus.config`**
   - `title`, `tagline` под SafeVibe.
   - `url`: `https://<username>.github.io` или `https://<org>.github.io`.
   - `baseUrl`: `'/<repo-name>/'` или `'/'` для root-проекта.
   - `organizationName`, `projectName` — как на GitHub.
   - `i18n` с `defaultLocale: 'ru'`.

3. **`themeConfig`**
   - `navbar`:
     - Линки на: `База знаний`, `Мини-аппы`, `Сообщество`, `Meta`.
   - `footer`:
     - Ссылки на Telegram, GitHub, ключевые документации.

4. **Sidebars**
   - В `sidebars.(js|ts)` объявить секции для:
     - `concepts`, `tools`, `workflows`, `apps`, `community`, `meta`.
   - Создать "хаб-страницы" (`index.md`) в каждой основной папке.

---

## 4. Obsidian-like интерфейс и shadcn UI

1. **Цели интерфейса**
   - Левый сайдбар: дерево разделов (docs) — аналог навигации Obsidian.
   - Центральная область: контент заметки.
   - (Опционально) правый сайдбар: оглавление, связанные заметки.
   - Быстрый поиск/командная палитра (дальше как мини-аппа).

2. **Интеграция Tailwind + shadcn в Docusaurus**
   - Настроить Tailwind: `tailwind.config.js`, `postcss.config.js`, подключение в Docusaurus theme.
   - Подключить shadcn:
     - Установить зависимости.
     - Добавить базовые UI-компоненты (buttons, input, card, dialog) в `src/components/ui/*`.
   - Настроить базовую цветовую схему под тёмный/светлый режим, близкий по вайбу к Obsidian.

3. **Layout**
   - Создать/кастомизировать layout Docusaurus, используя shadcn-компоненты для:
     - боковых панелей,
     - заголовков,
     - панелей поиска.

---

## 5. Контентные шаблоны и стандарты

1. **Каталог шаблонов**
   - `docs/meta/templates/guide-template.md`
   - `docs/meta/templates/review-template.md`
   - `docs/meta/templates/pattern-template.md`
   - `docs/meta/templates/playbook-template.md`

2. **Структура шаблона** (пример)
   - Front matter (обязательные поля: `title`, `description`, `tags`, `type`, `status`, `author`).
   - Блоки:
     - `Контекст`
     - `Шаги`
     - `Примеры`
     - `Антипаттерны`
     - `Ресурсы`
     - `Обсуждение`

3. **Правила именования файлов**
   - kebab-case: `obsidian-setup-guide.md`.
   - Папки по доменам: `docs/tools/obsidian/obsidian-setup-guide.md` и т.п.

---

## 6. Мини-аппы (React + shadcn + MDX)

1. **Подход к мини-аппам**
   - Все мини-аппы хранятся в `src/apps/<app-name>/`.
   - UI строится на компонентах shadcn (`src/components/ui/*`).
   - Встраивание в контент через MDX-страницы `docs/apps/<app-name>.mdx`.

2. **MVP-набор мини-апп**
   - `TagExplorer` — фильтрация/поиск заметок по тегам/типам/статусу.
   - `ToolstackPlanner` — визуальное составление и сохранение конфигураций стека инструментов/агентов.

3. **Правила для мини-апп** (документируются в `.rules/apps.md`)
   - Единая структура папки (компоненты, hooks, utils).
   - Обязательные состояния: `loading`, `empty`, `error`.
   - UI-согласованность со стилем всего сайта.

---

## 7. Meta и правила для AI-агентов и команды

1. **`docs/meta/agents.md`**
   - Список агентов (Claude и др.), их роли и ограничения.
   - Сценарии: генерация черновиков, рефакторинг, ревью, миграции.

2. **`docs/meta/claude.md`**
   - Какие директории читать сначала.
   - Какие `.rules/*` обязательны к учёту.
   - Как формулировать запросы, чтобы не ломать архитектуру.

3. **`.rules/*`**
   - Используются как основа для code review и работы агентов.
   - Обновляются только через PR с явным описанием изменений правил.

---

## 8. Workflow разработки и контрибьюций

1. **Git-flow**
   - Ветки: `main` (prod), `develop` (общая разработка), feature-ветки.
   - PR в `develop`, регулярные релизы в `main`.

2. **Шаблоны Issue/PR** (в `.github/`)
   - Issue: тип (контент/код/архитектура), область (`tools`, `apps`, `workflows`).
   - PR: чеклист по соблюдению шаблонов, тегов, `.rules/*`.

3. **Ревью**
   - Для контента и кода — минимум один ревьюер.
   - Для изменений в `.rules` и `meta` — ревью core maintainer.

---

## 9. GitHub Pages и деплой

1. **Настройка деплоя**
   - В `docusaurus.config` корректно задать `url` и `baseUrl` под GitHub Pages.
   - Настроить GitHub Actions workflow:
     - Триггер на пуш в `main`.
     - Шаги: `npm ci`, `npm run build`, деплой в `gh-pages`.

2. **Настройки GitHub**
   - Включить GitHub Pages из ветки `gh-pages`.
   - Проверить доступность сайта.

3. **Проверка после деплоя**
   - Навигация, поиск.
   - Работа мини-апп.
   - Отображение тегов, метаданных.

---

## 10. Чеклист действий для MVP

1. Инициализировать Docusaurus-проект в текущем репозитории.
2. Настроить `docusaurus.config` и `sidebars` под домены `concepts`, `tools`, `workflows`, `apps`, `community`, `meta`.
3. Создать структуру `docs/` и страницы в `docs/meta/*` (архитектура, таксономия, стиль, агенты).
4. Создать `.rules/*` и описать строгие правила.
5. Добавить шаблоны контента и первые 5–10 реальных заметок.
6. Подключить Tailwind + shadcn и настроить базовый Obsidian-like layout.
7. Реализовать первую мини-аппу (например, `TagExplorer`) и встроить её через MDX.
8. Настроить GitHub Actions и GitHub Pages.
9. Провести внутренний тест с командой, собрать фидбек и при необходимости скорректировать таксономию и правила.

